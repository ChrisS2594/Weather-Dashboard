<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Weather Dashboard</title>
</head>

<body>
    <form id="cityWeather">
        Search For Weather By City:<br>
        <input id="city" type="text">

        <button class="weather">Search</button>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script type="text/javascript">

            //Weather Search button listener

            $("#cityWeather").on("submit", function (event) {

                //console.log(event)
                event.preventDefault();
                //$('body').empty();
                // calling weather
                let city = $("#city").val();
                let APIKey = "27c1cb8e958edefa8e76e521738fbd32";
                let queryURL = "https://api.openweathermap.org/data/2.5/forecast?q=" + city + "&appid=" + APIKey + "&units=imperial";

                //console.log(response)
                // this code sends our ajax requests and sets our promise
                $.ajax({
                    url: queryURL,
                    method: "GET"
                }).then(function (response) {
                    console.log(response);
                    // this line is creating a DIV variable
                    let weatherDiv = $("<div>");
                    let p = $("<p>").text("City: " + response.city.name);
                    let p2 = $("<p>").text("Date: " + response.list[0].dt_txt);
                    let p3 = $("<p>").text("Temperature:Â " + response.list[0].main.temp);
                    let p4 = $("<p>").icon(response.list[0].weather[0].icon)
                        // the following lines push the response we want from the Json to the html
                    weatherDiv.append(p);
                    weatherDiv.append(p2);
                    weatherDiv.append(p3);
                    weatherDiv.append(p4);
                    $("body").append(weatherDiv);

                })
            });




        </script>

</body>

</html>